import{j as t,r,g as h,s as u,c as b,R as f}from"./main.js";import{i as p,g as A}from"./hubspot.js";function g({account:o,onRemove:s}){return t.jsx("div",{className:"p-4 rounded-lg border border-gray-200 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900",children:o.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Portal ID: ",o.hubId]})]}),t.jsx("button",{onClick:()=>s(o.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]})})}function j({children:o,className:s="",...n}){return t.jsx("button",{className:`px-4 py-2 bg-[color:var(--color-hubspot)] hover:bg-[color:var(--color-hubspot-hover)] disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-md ${s}`,...n,children:o})}function v(){const[o,s]=r.useState([]),[n,d]=r.useState(!1);r.useEffect(()=>{i()},[]);const i=async()=>{const e=await h();s(e)},m=async()=>{try{d(!0);const e=await p();console.log("Auth Result:",e);const c=await A(e.access_token);console.log("Account Info:",c);const a={hubId:c.portalId,name:c.accountName,accessToken:e.access_token,refreshToken:e.refresh_token};console.log("New Account to be saved:",a);const l=[...o,a];await u(l),s(l)}catch(e){console.error("Failed to add account:",e)}finally{d(!1)}},x=async e=>{const c=o.filter(a=>a.id!==e);await u(c),s(c)};return t.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"HubSpot Account Manager"}),t.jsx("div",{className:"space-y-4",children:o.map(e=>t.jsx(g,{account:e,onRemove:x},e.hubId))}),t.jsx(j,{onClick:m,disabled:n,className:"mt-6",children:n?"Adding Account...":"Add HubSpot Account"})]})}b(document.getElementById("root")).render(t.jsx(f.StrictMode,{children:t.jsx(v,{})}));
